<h1>Communication Summaries</h1>
<div
  style="display: flex; align-items; bottom; gap: var(--space-3x); align-items: end; flex-wrap: wrap;"
>
  <ui-input-numeric
    label="Patient ID"
    placeholder="12345"
    [showErrorMessage]="false"
    style="min-width: 15rem"
    [validators]="{ required: false }"
    #patientIdInput
  />
  <button
    style="max-block-size: 45px"
    (click)="handleGetMessagesClick(patientIdInput)"
    [disabled]="this.fetchPatientData.fetchingData"
  >
    @if (this.fetchPatientData.fetchingData) {
      Fetching Data
    } @else {
      Get Messages
    }
  </button>
  <button
    variant="outline"
    style="margin-left: auto; max-block-size: 45px"
    (click)="handleClearResults(patientIdInput)"
  >
    Clear All
  </button>
</div>

<div
  class="error"
  [style.visibility]="this.errors.data() ? 'visible' : 'hidden'"
  style="--flow-space: var(--space-2x)"
>
  <svg warningIcon aria-hidden="true" fill="var(--clr-error-100)"></svg>
  <p>{{ this.errors.data() }}</p>
</div>

<ul class="flow" style="list-style: none">
  @for (response of responses.data(); track $index) {
  <li>
    <app-response
      [response]="response"
      style="--flow-space: var(--space-10x); display: block"
    />
  </li>
  }
</ul>
